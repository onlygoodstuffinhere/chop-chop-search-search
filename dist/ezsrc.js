!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";e.exports=function(e){var t,r,A,K,E,I,g,C="",w="",y=0,m=e.length,H=m-1;e=String(e).toUpperCase()+"     ",t=o.test(e),r=a.test(e),g=e.split(""),i.test(e)&&y++;"X"===g[0]&&(C+="S",w+="S",y++);for(;y<m;)switch(E=g[y-1],K=g[y+1],I=g[y+2],g[y]){case"A":case"E":case"I":case"O":case"U":case"Y":case"À":case"Ê":case"É":0===y&&(C+="A",w+="A"),y++;break;case"B":C+="P",w+="P","B"===K&&y++,y++;break;case"Ç":C+="S",w+="S",y++;break;case"C":if("A"===E&&"H"===K&&"I"!==I&&!n.test(g[y-2])&&("E"!==I||(A=e.slice(y-2,y+4)&&("BACHER"===A||"MACHER"===A)))){C+="K",w+="K",y+=2;break}if(0===y&&"AESAR"===e.slice(y+1,y+6)){C+="S",w+="S",y+=2;break}if("HIA"===e.slice(y+1,y+4)){C+="K",w+="K",y+=2;break}if("H"===K){if(y>0&&"A"===I&&"E"===g[y+3]){C+="K",w+="X",y+=2;break}if(0===y&&c.test(e)){C+="K",w+="K",y+=2;break}r||s.test(e.slice(y-2,y+4))||"T"===I||"S"===I||(0===y||"A"===E||"E"===E||"O"===E||"U"===E)&&f.test(I)?(C+="K",w+="K"):0===y?(C+="X",w+="X"):"MC"===e.slice(0,2)?(C+="K",w+="K"):(C+="X",w+="K"),y+=2;break}if("Z"===K&&"WI"!==e.slice(y-2,y)){C+="S",w+="X",y+=2;break}if("CIA"===e.slice(y+1,y+4)){C+="X",w+="X",y+=3;break}if("C"===K&&(1!==y||"M"!==g[0])){if("I"!==I&&"E"!==I&&"H"!==I||"HU"===e.slice(y+2,y+4)){C+="K",w+="K",y+=2;break}A=e.slice(y-1,y+4),1===y&&"A"===E||"UCCEE"===A||"UCCES"===A?(C+="KS",w+="KS"):(C+="X",w+="X"),y+=3;break}if("G"===K||"K"===K||"Q"===K){C+="K",w+="K",y+=2;break}if("I"===K&&("E"===I||"O"===I)){C+="S",w+="X",y+=2;break}if("I"===K||"E"===K||"Y"===K){C+="S",w+="S",y+=2;break}if(C+="K",w+="K"," "===K&&("C"===I||"G"===I||"Q"===I)){y+=3;break}y++;break;case"D":if("G"===K){"E"===I||"I"===I||"Y"===I?(C+="J",w+="J",y+=3):(C+="TK",w+="TK",y+=2);break}if("T"===K||"D"===K){C+="T",w+="T",y+=2;break}C+="T",w+="T",y++;break;case"F":"F"===K&&y++,y++,C+="F",w+="F";break;case"G":if("H"===K){if(y>0&&!n.test(E)){C+="K",w+="K",y+=2;break}if(0===y){"I"===I?(C+="J",w+="J"):(C+="K",w+="K"),y+=2;break}if("B"===(A=g[y-2])||"H"===A||"D"===A||("B"===(A=g[y-3])||"H"===A||"D"===A)||("B"===(A=g[y-4])||"H"===A)){y+=2;break}y>2&&"U"===E&&l.test(g[y-3])?(C+="F",w+="F"):y>0&&"I"!==E&&(C+="K",w+="K"),y+=2;break}if("N"===K){1===y&&n.test(g[0])&&!t?(C+="KN",w+="N"):"EY"===e.slice(y+2,y+4)||"Y"===e.slice(y+1)||t?(C+="KN",w+="KN"):(C+="N",w+="KN"),y+=2;break}if("LI"===e.slice(y+1,y+3)&&!t){C+="KL",w+="L",y+=2;break}if(0===y&&u.test(e.slice(1,3))){C+="K",w+="J",y+=2;break}if("ER"===e.slice(y+1,y+3)&&"I"!==E&&"E"!==E&&!b.test(e.slice(0,6))||"Y"===K&&!d.test(E)){C+="K",w+="J",y+=2;break}if("E"===K||"I"===K||"Y"===K||("A"===E||"O"===E)&&"G"===K&&"I"===I){"ET"===e.slice(y+1,y+3)||r?(C+="K",w+="K"):(C+="J","IER "===e.slice(y+1,y+5)?w+="J":w+="K"),y+=2;break}"G"===K&&y++,y++,C+="K",w+="K";break;case"H":n.test(K)&&(0===y||n.test(E))&&(C+="H",w+="H",y++),y++;break;case"J":if("JOSE"===e.slice(y,y+4)||"SAN "===e.slice(0,4)){"SAN "===e.slice(0,4)||0===y&&" "===g[y+4]?(C+="H",w+="H"):(C+="J",w+="H"),y++;break}0===y?(C+="J",w+="A"):t||"A"!==K&&"O"!==K||!n.test(E)?y===H?C+="J":"S"===E||"K"===E||"L"===E||k.test(K)?"J"===K&&y++:(C+="J",w+="J"):(C+="J",w+="H"),y++;break;case"K":"K"===K&&y++,C+="K",w+="K",y++;break;case"L":if("L"===K){if(y===m-3&&("A"===E&&"E"===I||"I"===E&&("O"===I||"A"===I))||"A"===E&&"E"===I&&("A"===g[H]||"O"===g[H]||S.test(e.slice(H-1,m)))){C+="L",y+=2;break}y++}C+="L",w+="L",y++;break;case"M":"M"!==K&&("U"!==E||"B"!==K||y+1!==H&&"ER"!==e.slice(y+2,y+4))||y++,y++,C+="M",w+="M";break;case"N":"N"===K&&y++,y++,C+="N",w+="N";break;case"Ñ":y++,C+="N",w+="N";break;case"P":if("H"===K){C+="F",w+="F",y+=2;break}"P"!==(A=K)&&"B"!==A||y++,y++,C+="P",w+="P";break;case"Q":"Q"===K&&y++,y++,C+="K",w+="K";break;case"R":y!==H||t||"E"!==E||"I"!==g[y-2]||"M"===g[y-4]||"E"===g[y-3]||"A"===g[y-3]?(C+="R",w+="R"):w+="R","R"===K&&y++,y++;break;case"S":if("L"===K&&("I"===E||"Y"===E)){y++;break}if(0===y&&"UGAR"===e.slice(1,5)){C+="X",w+="S",y++;break}if("H"===K){p.test(e.slice(y+1,y+5))?(C+="S",w+="S"):(C+="X",w+="X"),y+=2;break}if("I"===K&&("O"===I||"A"===I)){t?(C+="S",w+="S"):(C+="S",w+="X"),y+=3;break}if("Z"===K||0===y&&("L"===K||"M"===K||"N"===K||"W"===K)){C+="S",w+="X","Z"===K&&y++,y++;break}if("C"===K){if("H"===I){if(A=e.slice(y+3,y+5),h.test(A)){"ER"===A||"EN"===A?(C+="X",w+="SK"):(C+="SK",w+="SK"),y+=3;break}0!==y||n.test(g[3])||"W"===g[3]?(C+="X",w+="X"):(C+="X",w+="S"),y+=3;break}if("I"===I||"E"===I||"Y"===I){C+="S",w+="S",y+=3;break}C+="SK",w+="SK",y+=3;break}A=e.slice(y-2,y),y!==H||"AI"!==A&&"OI"!==A?(C+="S",w+="S"):w+="S","S"===K&&y++,y++;break;case"T":if("I"===K&&"O"===I&&"N"===g[y+3]){C+="X",w+="X",y+=3;break}if(A=e.slice(y+1,y+3),"I"===K&&"A"===I||"C"===K&&"H"===I){C+="X",w+="X",y+=3;break}if("H"===K||"T"===K&&"H"===I){r||("O"===I||"A"===I)&&"M"===g[y+3]?(C+="T",w+="T"):(C+="0",w+="T"),y+=2;break}"T"!==K&&"D"!==K||y++,y++,C+="T",w+="T";break;case"V":"V"===K&&y++,C+="F",w+="F",y++;break;case"W":if("R"===K){C+="R",w+="R",y+=2;break}if(0===y&&(n.test(K)?(C+="A",w+="F"):"H"===K&&(C+="A",w+="A")),("E"===E||"O"===E)&&"S"===K&&"K"===I&&("I"===g[y+3]||"Y"===g[y+3])||"SCH"===e.slice(0,3)||y===H&&n.test(E)){w+="F",y++;break}if("I"===K&&("C"===I||"T"===I)&&"Z"===g[y+3]){C+="TS",w+="FX",y+=4;break}y++;break;case"X":(y!==H||"U"!==E||"A"!==g[y-2]&&"O"!==g[y-2])&&(C+="KS",w+="KS"),"C"!==K&&"X"!==K||y++,y++;break;case"Z":if("H"===K){C+="J",w+="J",y+=2;break}"Z"===K&&("A"===I||"I"===I||"O"===I)||t&&y>0&&"T"!==E?(C+="S",w+="TS"):(C+="S",w+="S"),"Z"===K&&y++,y++;break;default:y++}return[C,w]};var n=/[AEIOUY]/,o=/W|K|CZ|WITZ/,a=/^(VAN |VON |SCH)/,i=/^(GN|KN|PN|WR|PS)/,c=/^CH(IA|EM|OR([^E])|YM|ARAC|ARIS)/,s=/ORCHES|ARCHIT|ORCHID/,f=/[ BFHLMNRVW]/,l=/[CGLRT]/,u=/Y[\s\S]|E[BILPRSY]|I[BELN]/,b=/^[DMR]ANGER/,d=/[EGIR]/,k=/[LTKSNMBZ]/,S=/AS|OS/,p=/EIM|OEK|OLM|OLZ/,h=/E[DMNR]|UY|OO/},function(e,t,r){(function(e){var n;!function(){"use strict";var o;try{o="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){console.log("Collator could not be initialized and wouldn't be used")}var a=[],i=[],c={get:function(e,t,r){var n,c,s,f,l,u,b=r&&o&&r.useCollator,d=e.length,k=t.length;if(0===d)return k;if(0===k)return d;for(s=0;s<k;++s)a[s]=s,i[s]=t.charCodeAt(s);if(a[k]=k,b)for(s=0;s<d;++s){for(c=s+1,f=0;f<k;++f)n=c,u=0===o.compare(e.charAt(s),String.fromCharCode(i[f])),(c=a[f]+(u?0:1))>(l=n+1)&&(c=l),c>(l=a[f+1]+1)&&(c=l),a[f]=n;a[f]=c}else for(s=0;s<d;++s){for(c=s+1,f=0;f<k;++f)n=c,u=e.charCodeAt(s)===i[f],(c=a[f]+(u?0:1))>(l=n+1)&&(c=l),c>(l=a[f+1]+1)&&(c=l),a[f]=n;a[f]=c}return c}};null!==r(4)&&r(3)?void 0===(n=function(){return c}.call(t,r,t,e))||(e.exports=n):void 0!==e&&null!==e&&void 0!==t&&e.exports===t?e.exports=c:"undefined"!=typeof self&&"function"==typeof self.postMessage&&"function"==typeof self.importScripts?self.Levenshtein=c:"undefined"!=typeof window&&null!==window&&(window.Levenshtein=c)}()}).call(this,r(5)(e))},function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),a=r(0),i=r.n(a),c=2,s=4,f={toLowerCase:u,tokenize:b,filterEmptyString:d,rTree:l,levenshtein:function(e,t){let r=o.a.get(e,t);return 1-2*r/(e.length+t.length+r)},toSearchable:function(e){let t=[];return S(e).forEach(function(e){t=t.concat(i()(e))}),Array.from(new Set(t))},toComparable:function(e){let t=S(e);return Array.from(new Set(t))},toIndexable:function(e){let t=[];S(e).forEach(function(e){t=t.concat(i()(e))});let r=[];return(t=Array.from(new Set(t))).forEach(function(e){r=r.concat(l(e))}),r=Array.from(new Set(r))},urlToIndexable:function(e){let t=new URL(u(e)),r=t.hostname,n=t.pathname,o=b(r),a=[];(o=(o=o.concat(b(n))).filter(k)).forEach(function(e){a=a.concat(i()(e))});let c=[];return(a=Array.from(new Set(a))).forEach(function(e){c=c.concat(l(e))}),c=Array.from(new Set(c))}};function l(e){if(e.length<=c)return[e];{let t=[];for(let r=c;r<=e.length;r++)t.push(e.substr(0,r));return t}}function u(e){return e.toLowerCase()}function b(e){return e.split(/[\W_]/)}function d(e){return""!==e}function k(e){return e.length>=s}function S(e){return b(u(e)).filter(d)}var p=new Map,h=new Map,A={index:function(e){e.forEach(function(e,t){if(!h.has(t)){h.set(t,e);let r=[];r=(r=f.toIndexable(e.title)).concat(f.urlToIndexable(e.url)),r=Array.from(new Set(r));for(let e of r)if(p.has(e)){let r=p.get(e);r.push(t),p.set(e,r)}else{let r=[""+t];p.set(e,r)}}})},getBMId:function(e){let t=[];return e.constructor===Array?e.forEach(function(e){p.has(e)&&(t=t.concat(p.get(e)))}):p.has(e)&&t.push(p.get(e)),t},getBM:function(e){let t=[];return e.constructor===Array?e.forEach(function(e){h.has(e)&&t.push(h.get(e))}):h.has(e)&&t.push(h.get(e)),t},disindex:function(e){h.has(e)&&(h.delete(e),p.forEach(function(t,r){let n=t.indexOf(e);-1!==n&&((t=t.splice(n,1)).length>0?p.set(r,t):p.delete(r))}))}},K={getAll:async function(){try{return function e(t){let r=new Map;if("folder"===t.type)for(let a of t.children)for(var[n,o]of e(a))r.set(n,o);else if("bookmark"===t.type&&t.url.startsWith("http")){let e=g(t);r.set(e.id,e)}return r}((await browser.bookmarks.getTree())[0])}catch(e){console.log(`fugg ${e}`)}},init:function(){browser.bookmarks.onCreated.addListener(E),browser.bookmarks.onRemoved.addListener(I)}};function E(e,t){let r=g(t),n=new Map;n.set(r.id,r),A.index(n)}function I(e,t){let r=e;A.disindex(r)}function g(e){return{title:e.title,url:e.url,date:e.dateAdded,id:e.id}}var C={queryToBookmarks:function(e){let t=f.toSearchable(e),r=A.getBMId(t),n=A.getBM(r);return n=function(e,t){let r=f.toComparable(t),n=[];return e.forEach(function(e){let t=f.toComparable(e.title),o=0;for(let e of r)for(let r of t)f.levenshtein(e,r)>=.85&&o++;n.push({score:o,item:e})}),(n=n.filter(e=>e.score>0)).sort(w),console.log("scored bookmarks"),console.log(n),n.map(function(e){return e.item})}(n=Array.from(new Set(n)),e)}};function w(e,t){return e.score>t.score?-1:e.score<t.score?1:e.score===t.score?e.date>t.date?-1:1:0}var y=function(){browser.omnibox.onInputChanged.addListener(H),browser.omnibox.onInputEntered.addListener(m),browser.omnibox.setDefaultSuggestion({description:"CHOP CHOP'S SEARCH SEARCH - type at least 3 characters"})};function m(e,t){switch(t){case"currentTab":browser.tabs.update({url:e});break;case"newForegroundTab":browser.tabs.create({url:e});break;case"newBackgroundTab":browser.tabs.create({url:e,active:!1})}}function H(e,t){if(console.log("searching for query : "+e),e.length<3)return void t({content:"",description:"Sry, no results. Please type at lest 3 characters."});let r=C.queryToBookmarks(e).map(function(e){return{content:e.url,description:e.title}});0!==r.length?t(r):t({content:"",description:"Sry, no results. Please type at lest 3 characters."})}browser.runtime.onInstalled.addListener(function(){K.getAll().then(function(e){A.index(e)})}),y(),K.init()},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}]);